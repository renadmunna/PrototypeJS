<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>onChange</title><script src="../src/dev.js"></script>
	<script src="../prototype.js"></script>
</head>
<body>
	<div class="a" a1="test1" b1="test2">renad</div>
<script>
HTMLElement.prototype._setAttribute=HTMLElement.prototype.setAttribute;
HTMLElement.prototype.setAttribute=function(name,value){
	_value=this.getAttribute(name);
	this._setAttribute(name,value);
	this['@on']('attrChange',{type:'attr',name:name,changes:{new:value,old:_value}})
	this['@on']('change',{type:'attr',obj:this,name:name,changes:{new:value,old:_value}})
};
Element.prototype._html={
	get(){return this._html},
	set(val){_value=this._html;this._html=val;
		this['@on']('change',{type:'html',obj:this,changes:{new:value,old:_value}})
	}
};
Element.prototype._innerHTML=Object.getOwnPropertyDescriptor(Element.prototype,'innerHTML');
Object.defineProperty(HTMLElement.prototype,'_html',Element.prototype._innerHTML);
Object.defineProperty(HTMLElement.prototype,'innerHTML',Element.prototype._html);
Object.defineProperty(HTMLElement.prototype,'html',Element.prototype._html);
// Object.defineProperty(HTMLElement.prototype,'html',{
// 	get(){return this.innerHTML},
// 	set(val){this.innerHTML=val}
// });


var a=dom('.a');
a.on('change',function(e){
	// console.log(e.detail);
	switch(e.detail.type) {
		case 'attr':
			console.log(e.detail.changes);
		  break;
		case 'html':
			console.log(e.detail.changes);
		  break;
	}
});
a.html='<div>munna</div>';
a.attr('r','renad');
a.attr('c','ali');
a.attr('r','ali');
// a.html='ali';
</script>
</body>
</html>